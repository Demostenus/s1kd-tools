.\" Automatically generated by Pandoc 1.19.2.1
.\"
.TH "s1kd\-brexcheck" "1" "2017\-11\-15" "" "General Commands Manual"
.hy
.SH NAME
.PP
s1kd\-brexcheck \- Validate S1000D data modules against BREX data
modules
.SH SYNOPSIS
.PP
s1kd\-brexcheck [\-b <brex>] [\-I <path>] [\-w <severities>]
[\-vVqDsxlStuh?] <datamodules>
.SH DESCRIPTION
.PP
The \f[I]s1kd\-brexcheck\f[] tool validates an S1000D data module using
the context rules of one or multiple BREX (Business Rules EXchange) data
modules.
All errors are displayed with the <objectUse> message, the line number,
and a representation of the invalid XML tree.
.SH OPTIONS
.TP
.B \-b <brex>
Check the data modules against this BREX.
Multiple BREX data modules can be specified by adding this option
multiple times.
When no BREX data modules are specified, the BREX data module referenced
in <brexDmRef> in the data module is attempted to be used instead.
.RS
.RE
.TP
.B \-I <path>
Add a search path for BREX data modules.
By default, only the current directory is searched.
.RS
.RE
.TP
.B \-v \-V \-q \-D
Verbosity of the output.
.RS
.RE
.TP
.B \-s
Use shortened, single\-line messages to report BREX errors instead of
multiline indented messages.
.RS
.RE
.TP
.B \-x
Output an XML report instead of a plain\-text one.
.RS
.RE
.TP
.B \-l
Use the layered BREX concept.
BREX data modules referenced by other BREX data modules (either
specified with \-b or referenced by the specified data modules) will
also be checked against.
.RS
.RE
.TP
.B \-w <severities>
Specify a list of severity levels for business rules.
.RS
.RE
.TP
.B \-S[tu]
Check SNS (Standard Numbering System) rules.
The SNS of each specified data module is checked against the combination
of all SNS rules of all specified BREX data modules.
.RS
.RE
.TP
.B \-n
Check notation rules.
Any notation names listed in any of the BREX data modules with attribute
\f[C]allowedNotationFlag\f[] set to "1" or omitted are considered valid
notations.
If a notation in a data module is not present or has
\f[C]allowedNotationFlag\f[] set to "0", an error will be returned.
.RS
.PP
For notations not included but not explicitly excluded, the
\f[C]objectUse\f[] of the first inclusion rule will be returned with the
error.
For explicitly excluded notations, the \f[C]objectUse\f[] of the
explicit exclusion rule is returned.
.RE
.TP
.B \-p
Display a progress bar.
.RS
.RE
.TP
.B \-f
Output only the filenames of modules with BREX/SNS errors.
.RS
.RE
.TP
.B \-h \-?
Show the help/usage message.
.RS
.RE
.SS Business rule severity levels (\-w)
.PP
The attribute brSeverityLevel on a BREX rule allows for distinguishing
different kinds of errors.
The \-w option takes an XML file containing a list of severity levels,
their user\-defined type, and optionally if they should not be counted
as true errors (causing the tool to return a "failure" status) but
merely warnings.
.PP
An example of the format of this file is given below:
.IP
.nf
\f[C]
<?xml\ version="1.0"?>
<brSeverityLevels>
\ \ <brSeverityLevel\ value="brsl01"\ fail="yes">Error</brSeverityLevel>
\ \ <brSeverityLevel\ value="brsl02"\ fail="no">Warning</brSeverityLevel>
</brSeverityLevels>
\f[]
.fi
.PP
When the attribute \f[C]fail\f[] has a value of "yes" (or is not
included), BREX errors pertaining to rules with the given severity level
value will be counted as errors.
When it is no, the errors are still displayed but are not counted as
errors in the exit status code of the tool.
.SS Normal, strict and unstrict SNS check (\-S, \-St, \-Su)
.PP
There are three modes for SNS checking: normal, strict, and unstrict.
The main difference between them is how they handle the optional levels
of an SNS description in the BREX.
.PP
\-St enables \f[I]strict\f[] SNS checking.
By default, the normal SNS check (\-S) will assume optional elements
snsSubSystem, snsSubSubSystem, and snsAssy exist with an snsCode of "0"
("00" or "0000" for snsAssy) when their parent element does not contain
any of each.
This provides a shorthand, such that
.IP
.nf
\f[C]
<snsSystem>
\ \ <snsCode>00</snsCode>
\ \ <snsTitle>General</snsTitle>
</snsSystem>
\f[]
.fi
.PP
is equivalent to
.IP
.nf
\f[C]
<snsSystem>
\ \ <snsCode>00</snsCode>
\ \ <snsTitle>General</snsTitle>
\ \ <snsSubSystem>
\ \ \ \ <snsCode>0</snsCode>
\ \ \ \ <snsTitle>General</snsTitle>
\ \ \ \ <snsSubSubSystem>
\ \ \ \ \ \ <snsCode>0</snsCode>
\ \ \ \ \ \ <snsTitle>General</snsTitle>
\ \ \ \ \ \ <snsAssy>
\ \ \ \ \ \ \ \ <snsCode>00</snsCode>
\ \ \ \ \ \ \ \ <snsTitle>General</snsTitle>
\ \ \ \ \ \ </snsAssy>
\ \ \ \ </snsSubSubSystem>
\ \ </snsSubSystem>
</snsSystem>
\f[]
.fi
.PP
Using strict checking will disable this shorthand, and missing optional
elements will result in an error.
.PP
\-Su enables \f[I]unstrict\f[] SNS checking.
The normal SNS check (\-S) shorthand mentioned above only allows SNS
codes of "0" to be omitted from the SNS rules.
Using unstrict checking, \f[I]any\f[] code used will not produce an
error when the relevant optional elements are omitted.
This means that given the following...
.IP
.nf
\f[C]
<snsSystem>
\ \ <snsCode>00</snsCode>
\ \ <snsTitle>General</snsTitle>
</snsSystem>
\f[]
.fi
.PP
\&...SNS codes of 00\-00\-0000 through 00\-ZZ\-ZZZZ are considered
valid.
.SH RETURN VALUE
.PP
The number of BREX errors encountered is returned in the exit status
code.
.SH EXAMPLE
.IP
.nf
\f[C]
$\ DMOD=DMC\-S1000DTOOLS\-A\-00\-00\-00\-00A\-040A\-D_000\-01_EN\-CA.XML
$\ BREX=DMC\-S1000D\-F\-04\-10\-0301\-00A\-022A\-D_001\-00_EN\-US.XML
$\ cat\ $DMOD
[...]
<listItem\ id="stp\-0001">
\ \ <para>List\ items\ shouldn\[aq]t\ be\ used\ as\ steps...</para>
</listItem>
[...]
<para>Refer\ to\ <internalRef\ internalRefId="stp\-0001"
internalRefTargetType="irtt08"/>.</para>
[...]

$\ s1kd\-brexcheck\ \-b\ $BREX\ $DMOD
BREX\ ERROR:\ DMC\-S1000DTOOLS\-A\-00\-00\-00\-00A\-040A\-D_000\-01_EN\-CA.XML
\ \ Only\ when\ the\ reference\ target\ is\ a\ step\ can\ the\ value\ of\ attribute
internalRefTargetType\ be\ irtt08\ (Chap\ 3.9.5.2.1.2,\ Para\ 2.1).
\ \ line\ 53:
\ \ \ \ ELEMENT\ internalRef
\ \ \ \ \ \ ATTRIBUTE\ internalRefId
\ \ \ \ \ \ \ \ TEXT
\ \ \ \ \ \ \ \ \ \ content=stp\-0001
\ \ \ \ \ \ ATTRIBUTE\ internalRefTargetType
\ \ \ \ \ \ \ \ TEXT
\ \ \ \ \ \ \ \ \ \ content=irtt08
\f[]
.fi
.SH AUTHORS
khzae.net.
