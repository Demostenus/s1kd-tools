.\" Automatically generated by Pandoc 2.3.1
.\"
.TH "s1kd\-icncatalog" "1" "2019\-02\-16" "" "s1kd\-tools"
.hy
.SH NAME
.PP
s1kd\-icncatalog \- Manage the catalog used to resolve ICNs
.SH SYNOPSIS
.IP
.nf
\f[C]
s1kd\-icncatalog\ [options]\ [<object>...]
\f[]
.fi
.SH DESCRIPTION
.PP
The \f[I]s1kd\-icncatalog\f[] tool is used to manage a catalog of ICNs
for a project, and to resolve ICNs using this catalog.
Resolving an ICN means placing the actual filename of the ICN in to the
SYSTEM ID of the ENTITY declaration within CSDB objects.
.SH OPTIONS
.TP
.B \-a <ICN>
Add an ICN to the catalog.
Follow with the \-u and \-n options to specify the URI and notation to
use for this ICN.
The \-m option specifies a media group to add the ICN to.
.RS
.RE
.TP
.B \-c <catalog>
Specify the catalog file to manage or resolve against.
By default, the file \f[C]\&.icncatalog\f[] in the current directory is
used.
If the current directory does not contain this file, the parent
directories will be searched.
.RS
.RE
.TP
.B \-d <ICN>
Delete an ICN from the catalog.
The \-m option specifies a media group to delete the ICN from.
.RS
.RE
.TP
.B \-f
Overwrite the input CSDB objects when resolving ICNs, or overwrite the
catalog file when modifying it.
Otherwise, output is written to stdout.
.RS
.RE
.TP
.B \-l
Treat input (stdin or arguments) as lists of filenames of CSDB objects,
rather than CSDB objects themselves.
.RS
.RE
.TP
.B \-m <media>
Resolve ICNs for this intended output media.
The catalog may contain alternative formats for the same ICN to be used
for different output media.
.RS
.RE
.TP
.B \-n <notation>
Specify the notation to reference when adding an ICN with the \-a
option.
.RS
.RE
.TP
.B \-t
Create a new empty catalog.
.RS
.RE
.TP
.B \-u <URI>
Specify the URI when adding an ICN with the \-a option.
.RS
.RE
.TP
.B \-x
Process input CSDB objects using the XInclude specification.
.RS
.RE
.TP
.B \-\-version
Show version information.
.RS
.RE
.SH EXAMPLES
.SS Resolving ICNs to filenames
.PP
A CSDB object may reference an ICN as follows:
.IP
.nf
\f[C]
<!NOTATION\ png\ SYSTEM\ "png">
<!ENTITY\ ICN\-12345\-00001\-001\-01\ SYSTEM\ "ICN\-12345\-00001\-001\-01.PNG"
NDATA\ png>
\f[]
.fi
.PP
The SYSTEM ID of this ENTITY indicates that the ICN file will be in the
same directory relative to the CSDB object.
However, the ICN files in this example are located in a separate folder
called \[aq]graphics\[aq].
Rather than manually updating every ENTITY declaration in every CSDB
object, a catalog file can be used to map ICNs to actual filenames:
.IP
.nf
\f[C]
<icnCatalog>
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="graphics/ICN\-12345\-00001\-001\-01.PNG"/>
</icnCatalog>
\f[]
.fi
.PP
Then, using this tool, the ICN can be resolved against the catalog:
.IP
.nf
\f[C]
$\ s1kd\-icncatalog\ \-c\ <catalog>\ <object>
\f[]
.fi
.PP
Producing the following output:
.IP
.nf
\f[C]
<!NOTATION\ png\ SYSTEM\ "png">
<!ENTITY\ ICN\-12345\-00001\-001\-01\ SYSTEM
"graphics/ICN\-12345\-00001\-001\-01.PNG"\ NDATA\ png>
\f[]
.fi
.SS Alternative ICN formats
.PP
A catalog can also be used to provide alternative file formats for an
ICN depending on the intended output media.
For example:
.IP
.nf
\f[C]
<icnCatalog>
<notation\ name="jpg"\ systemId="jpg"/>
<notation\ name="svg"\ systemId="svg"/>
<media\ name="pdf">
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="ICN\-12345\-00001\-001\-01.JPG"\ notation="jpg"/>
</media>
<media\ name="web">
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="ICN\-12345\-00001\-001\-01.SVG"\ notation="svg"/>
</media>
</icnCatalog>
\f[]
.fi
.PP
The \-m option allows for specifying which type of media to resolve for:
.IP
.nf
\f[C]
<!NOTATION\ png\ SYSTEM\ "png">
<!ENTITY\ ICN\-12345\-00001\-001\-01\ SYSTEM\ "ICN\-12345\-00001\-001\-01.PNG"
NDATA\ png>
\f[]
.fi
.IP
.nf
\f[C]
$\ s1kd\-icncatalog\ \-c\ <catalog>\ \-m\ pdf\ <object>
\f[]
.fi
.IP
.nf
\f[C]
<!NOTATION\ png\ SYSTEM\ "png">
<!NOTATION\ jpg\ SYSTEM\ "jpg">
<!ENTITY\ ICN\-12345\-00001\-001\-01\ SYSTEM\ "ICN\-12345\-00001\-001\-01.JPG"
NDATA\ jpg>
\f[]
.fi
.IP
.nf
\f[C]
$\ s1kd\-icncatalog\ \-c\ <catalog>\ \-m\ web\ <object>
\f[]
.fi
.IP
.nf
\f[C]
<!NOTATION\ png\ SYSTEM\ "png">
<!NOTATION\ svg\ SYSTEM\ "svg">
<!ENTITY\ ICN\-12345\-00001\-001\-01\ SYSTEM\ "ICN\-12345\-00001\-001\-01.SVG"
NDATA\ svg>
\f[]
.fi
.SS Reconstructing ICN entity declarations
.PP
Some processing, such as XSL transformations, may remove the DTD and
external entity declarations as part of parsing an XML CSDB object.
A catalog can be used to restore the necessary external entity
declarations afterwards.
For example:
.IP
.nf
\f[C]
$\ xsltproc\ ex.xsl\ <object>
\f[]
.fi
.PP
The resulting XML will not include a DTD or the external entity
declarations for the ICNs referenced in the object, so it will not be
valid according to the S1000D schema:
.IP
.nf
\f[C]
$\ xsltproc\ ex.xsl\ <object>\ |\ s1kd\-validate
\-:49:element\ graphic:\ Schemas\ validity\ error:\ Element\ \[aq]graphic\[aq],
attribute\ \[aq]infoEntityIdent\[aq]:\ \[aq]ICN\-12345\-00001\-001\-01\[aq]\ is\ not\ a\ valid
value\ of\ the\ atomic\ type\ \[aq]xs:ENTITY\[aq].
\f[]
.fi
.PP
Passing the result to this tool, with a catalog containing all the ICNs
used by the project:
.IP
.nf
\f[C]
$\ xsltproc\ ex.xsl\ <object>\ |\ s1kd\-icncatalog\ \-c\ <catalog>
\f[]
.fi
.PP
will reconstruct the required external entity declarations in the DTD.
.RS
.PP
\f[B]Note\f[]
.PP
The s1kd\-tools will copy the DTD and external entity declarations
automatically when performing transformations (such as with the
s1kd\-transform tool), so this is only necessary when using more generic
XML tools.
.RE
.SH CATALOG SCHEMA
.PP
The following describes the schema of an ICN catalog file.
.SS Catalog
.PP
\f[I]Markup element:\f[] \f[C]<icnCatalog>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
None
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
\f[C]<notation>\f[]
.IP \[bu] 2
\f[C]<media>\f[]
.IP \[bu] 2
\f[C]<icn>\f[]
.SS Notation
.PP
The element \f[C]<notation>\f[] represents a NOTATION declaration.
.PP
\f[I]Markup element:\f[] \f[C]<notation>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
\f[C]name\f[], the NDATA name.
.IP \[bu] 2
\f[C]publicId\f[], the optional PUBLIC ID of the notation.
.IP \[bu] 2
\f[C]systemId\f[], the optional SYSTEM ID of the notation.
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
None
.SS Media
.PP
The element \f[C]<media>\f[] groups a set of alternative ICN formats for
a particular output media type.
.PP
\f[I]Markup element:\f[] \f[C]<media>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
\f[C]name\f[], the identifier of the output media.
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
\f[C]<icn>\f[]
.SS ICN
.PP
The element \f[C]<icn>\f[] maps an ICN to a filename and optionally a
notation.
When this element occurs as a child of a \f[C]<media>\f[] element, it
will be used when that output media is specified with the \-m option.
When it occurs as a child of \f[C]<icnCatalog>\f[], it will be used if
no media is specified.
.PP
\f[I]Markup element:\f[] \f[C]<icn>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
\f[C]infoEntityIdent\f[], the ICN
.IP \[bu] 2
\f[C]uri\f[], the filename the ICN will resolve to
.IP \[bu] 2
\f[C]notation\f[], a reference to a previously declared
\f[C]<notation>\f[] element.
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
None
.SS Example ICN catalog
.IP
.nf
\f[C]
<icnCatalog>
<notation\ name="jpg"\ systemId="jpg"/>
<notation\ name="png"\ systemId="png"/>
<notation\ name="svg"\ systemId="svg"/>
<media\ name="pdf">
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="ICN\-12345\-00001\-001\-01.JPG"\ notation="jpg"/>
</media>
<media\ name="web">
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="ICN\-12345\-00001\-001\-01.SVG"\ notation="svg"/>
</media>
<icn\ infoEntityIdent="ICN\-12345\-00001\-001\-01"
uri="ICN\-12345\-00001\-001\-01.PNG"\ notation="png"/>
</icnCatalog>
\f[]
.fi
.SH AUTHORS
khzae.net.
