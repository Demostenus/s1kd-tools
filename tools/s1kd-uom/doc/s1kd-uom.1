.\" Automatically generated by Pandoc 2.3.1
.\"
.TH "s1kd\-uom" "1" "2018\-12\-21" "" "s1kd\-tools"
.hy
.SH NAME
.PP
s1kd\-uom \- Convert units of measure in quantity data
.SH SYNOPSIS
.IP
.nf
\f[C]
s1kd\-uom\ [\-F\ <fmt>]\ [\-u\ <uom>\ \-t\ <uom>\ [\-e\ <expr>]\ [\-F\ <fmt>]\ ...]
\ \ \ \ \ \ \ \ \ [\-U\ <path>]\ [\-fl,h?]\ [<object>...]
\f[]
.fi
.SH DESCRIPTION
.PP
The \f[I]s1kd\-uom\f[] tool converts between specified units of measure
in quantity data, for example, to automatically localize units of
measure in data modules.
.SH OPTIONS
.TP
.B \-e <expr>
Specify the formula for a conversion, given as an XPath expression.
.RS
.RE
.TP
.B \-F <fmt>
Specify the format for quantity values.
When used before \-u, this specifies the format for all conversions.
Otherwise, this specifies the format for each individual conversion.
.RS
.RE
.TP
.B \-f
Overwrite input CSDB objects.
.RS
.RE
.TP
.B \-h \-?
Show help/usage message.
.RS
.RE
.TP
.B \-l
Treat input (stdin or arguments) as lists of filenames of CSDB objects
to list references in, rather than CSDB objects themselves.
.RS
.RE
.TP
.B \-t <uom>
Unit of measure to convert to.
.RS
.RE
.TP
.B \-U <path>
Use a custom \f[C]\&.uom\f[] file.
.RS
.RE
.TP
.B \-u <uom>
Unit of measure to convert from.
.RS
.RE
.TP
.B \-\-version
Show version information.
.RS
.RE
.TP
.B <object>
CSDB objects to convert quantities in.
.RS
.RE
.SS \f[C]\&.uom\f[] file
.PP
This file contains the rules for converting units of measure.
If no specific conversions are given with the \-u and \-t options, this
file also acts as a list of all conversions to perform.
.PP
By default, the program will search the current directory and parent
directories for a file named \f[C]\&.uom\f[], but any file can be
specified by using the \-U option.
.PP
Example of a \f[C]\&.uom\f[] file:
.IP
.nf
\f[C]
<uom>
<convert\ from="degF"\ to="degC"\ formula="($value\ \-\ 32)\ *\ (5\ div\ 9)"/>
<convert\ from="in"\ to="cm"\ formula="$value\ *\ 2.54"/>
<convert\ from="lbm"\ to="kg"\ formula="$value\ div\ 2.205"/>
</uom>
\f[]
.fi
.PP
The tool contains a default set of rules for common units of measure.
This can be used to create a default \f[C]\&.uom\f[] file by use of the
\-, option:
.IP
.nf
\f[C]
$\ s1kd\-uom\ \-,\ >\ .uom
\f[]
.fi
.PP
To select only certain common rules when generating a \f[C]\&.uom\f[]
file, the \-u and \-t options can be used:
.IP
.nf
\f[C]
$\ s1kd\-uom\ \-,\ \-u\ in\ \-t\ cm\ \-u\ degF\ \-t\ degC\ >\ .uom
\f[]
.fi
.PP
This will generate a \f[C]\&.uom\f[] file containing rules to convert
inches to centimetres, and degrees Fahrenheit to degrees Celsius.
.SS Conversion formula variables (\-e)
.PP
When specifying a formula for conversion, the variable \f[C]$value\f[]
represents the original quantity value.
For example, the formula to convert between degrees Fahrenheit and
degrees Celsius can be given as follows:
.PP
\f[C]($value\ \-\ 32)\ *\ (5\ div\ 9)\f[]
.PP
In additions to this, the following common variables can be used:
.IP \[bu] 2
\f[C]$pi\f[]
.SH EXAMPLES
.SS Common units of measure
.PP
Input:
.IP
.nf
\f[C]
<quantity>
<quantityGroup>
<quantityValue\ quantityUnitOfMeasure="cm">15</quantityValue>
</quantityGroup>
</quantity>
\f[]
.fi
.PP
Command:
.IP
.nf
\f[C]
$\ s1kd\-uom\ \-u\ cm\ \-t\ in\ <DM>
\f[]
.fi
.PP
Output:
.IP
.nf
\f[C]
<quantity>
<quantityGroup>
<quantityValue\ quantityUnitOfMeasure="in">5.91</quantityValue>
</quantityGroup>
</quantity>
\f[]
.fi
.SS Using a custom formula and format
.PP
Input:
.IP
.nf
\f[C]
<quantity
quantityType="qty02"
quantityTypeSpecifics="CAD">10.00</quantity>
\f[]
.fi
.PP
Command:
.IP
.nf
\f[C]
$\ s1kd\-uom\ \-u\ CAD\ \-t\ USD\ \-e\ \[aq]$value\ div\ 1.31\[aq]\ \-F\ \[aq]0.00\[aq]
\f[]
.fi
.PP
Output:
.IP
.nf
\f[C]
<quantity
quantityType="qty02"
quantityTypeSpecifics="USD">7.36</quantity>
\f[]
.fi
.SH UOM FILE SCHEMA
.SS UOM
.PP
\f[I]Markup element:\f[] \f[C]<uom>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
\f[C]format\f[] (O), the number format for all rules.
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
\f[C]<convert>\f[]
.SS Conversion rule
.PP
The element \f[C]<convert>\f[] defines a rule to convert one unit of
measure to another.
.PP
\f[I]Markup element:\f[] \f[C]<convert>\f[]
.PP
\f[I]Attributes:\f[]
.IP \[bu] 2
\f[C]format\f[] (O), the number format for this specific rule.
.IP \[bu] 2
\f[C]formula\f[] (M), the expression used to convert the quantity value.
.IP \[bu] 2
\f[C]from\f[] (M), unit of measure to convert from.
.IP \[bu] 2
\f[C]to\f[] (M), unit of measure to convert to.
.PP
\f[I]Child elements:\f[]
.IP \[bu] 2
None
.SH AUTHORS
khzae.net.
