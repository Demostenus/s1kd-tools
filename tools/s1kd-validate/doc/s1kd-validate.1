.\" Automatically generated by Pandoc 2.3.1
.\"
.TH "s1kd\-validate" "1" "2019\-03\-24" "" "s1kd\-tools"
.hy
.SH NAME
.PP
s1kd\-validate \- Validate S1000D CSDB objects against their schemas
.SH SYNOPSIS
.IP
.nf
\f[C]
s1kd\-validate\ [\-d\ <dir>]\ [\-X\ <URI>]\ [\-floqvx]\ [<object>...]
\f[]
.fi
.SH DESCRIPTION
.PP
The \f[I]s1kd\-validate\f[] tool validates S1000D CSDB objects, checking
whether they are valid XML files and if they are valid against their own
S1000D schemas.
.SH OPTIONS
.TP
.B \-d <dir>
Search for schemas in <dir>.
Normally, the URI of the schema is used to fetch it locally or over a
network, but this option will force searching to be performed only in
the specified directory.
.RS
.PP
This can also be accomplished through the use of XML catalogs.
.RE
.TP
.B \-f
List invalid files.
.RS
.RE
.TP
.B \-l
Treat input as a list of object names to validate, rather than an object
itself.
.RS
.RE
.TP
.B \-o
Output valid CSDB objects to stdout.
.RS
.RE
.TP
.B \-v \-q
Set the verbosity of the output, verbose or quiet.
Verbose will explictly indicate success, rather than simply not
displaying any errors.
Quiet will not output anything.
.RS
.RE
.TP
.B \-X <URI>
Exclude an XML namespace from the validation.
Elements in the namespace specified by <URI> are ignored.
.RS
.RE
.TP
.B \-x
Do XInclude processing before validation.
.RS
.RE
.TP
.B \-\-version
Show version information.
.RS
.RE
.TP
.B <object>...
Any number of CSDB objects to validate.
If none are specified, input is read from stdin.
.RS
.RE
.PP
In addition, the following options enable features of the XML parser
that are disabled as a precaution by default:
.TP
.B \-\-dtdload
Load the external DTD.
.RS
.RE
.TP
.B \-\-net
Allow network access to load external DTD and entities.
.RS
.RE
.TP
.B \-\-noent
Substitute entities.
.RS
.RE
.SS Multi\-spec directory with \-d option
.PP
The \-d option can point either to a directory containing the XSD schema
files for a single S1000D spec (i.e.
the last part of the schema URI), or to a directory containing schemas
for multiple specs.
The latter must follow a particular format for the tool to locate the
appropriate schemas for a given spec:
.IP
.nf
\f[C]
schemas/\ \ \ \ <\-\-\ The\ directory\ passed\ to\ \-d
\ \ \ \ S1000D_4\-1/
\ \ \ \ \ \ \ \ xml_schema_flat/
\ \ \ \ \ \ \ \ \ \ \ \ [4.1\ XSD\ files...]
\ \ \ \ S1000D_4\-2/
\ \ \ \ \ \ \ \ xml_schema_flat/
\ \ \ \ \ \ \ \ \ \ \ \ [4.2\ XSD\ files...]
\f[]
.fi
.SS XML catalogs vs. \-d option
.PP
XML catalogs provide a more standard method of redirecting public,
network\-based resources to local copies.
As part of using libxml2, there are several locations and environment
variables from which this tool will load catalogs.
.PP
Below is an example of a catalog file which maps the S1000D schemas to a
local directory:
.IP
.nf
\f[C]
<catalog\ xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
<rewriteURI\ uriStartString="http://www.s1000d.org/"
rewritePrefix="/usr/share/s1kd/schemas/"/>
</catalog>
\f[]
.fi
.PP
This can be placed in a catalog file automatically loaded by libxml2
(e.g., \f[C]/etc/xml/catalog\f[]) or saved to a file which is then
specified in an environment variable used by libxml2 (e.g.,
\f[C]XML_CATALOG_FILES\f[]) to remove the need to use the \-d option.
.SH EXIT STATUS
.TP
.B 0
No errors.
.RS
.RE
.TP
.B 1
Some CSDB objects are not well\-formed or valid.
.RS
.RE
.TP
.B 2
The number of schemas cached exceeded the available memory.
.RS
.RE
.TP
.B 3
A specified schema could not be read.
.RS
.RE
.SH EXAMPLE
.IP
.nf
\f[C]
$\ s1kd\-validate\ DMC\-EX\-A\-00\-00\-00\-00A\-040A\-D_000\-01_EN\-CA.XML
\f[]
.fi
.SH AUTHORS
khzae.net.
